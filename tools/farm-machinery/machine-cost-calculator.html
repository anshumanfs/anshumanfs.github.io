<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Farm Machinery Cost Calculator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Add i18next libraries -->
  <script src="https://cdn.jsdelivr.net/npm/i18next@21.6.16/i18next.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/i18next-browser-languagedetector@6.1.4/i18nextBrowserLanguageDetector.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/i18next-http-backend@1.4.0/i18nextHttpBackend.min.js"></script>
</head>
<body class="bg-gray-50">
  <div class="container mx-auto px-4 py-8 max-w-4xl">
    <!-- Language selector -->
    <div class="flex justify-end mb-4">
      <div class="inline-flex rounded-md shadow-sm" role="group">
        <button id="lang-en" type="button" class="language-btn px-4 py-2 text-sm font-medium text-white bg-green-700 border border-green-700 rounded-l-lg hover:bg-green-800 focus:z-10 focus:ring-2 focus:ring-green-500">
          English
        </button>
        <button id="lang-hi" type="button" class="language-btn px-4 py-2 text-sm font-medium text-gray-900 bg-white border-t border-b border-gray-300 hover:bg-gray-100 hover:text-green-700 focus:z-10 focus:ring-2 focus:ring-green-500">
          हिंदी
        </button>
        <button id="lang-or" type="button" class="language-btn px-4 py-2 text-sm font-medium text-gray-900 bg-white border border-gray-300 rounded-r-lg hover:bg-gray-100 hover:text-green-700 focus:z-10 focus:ring-2 focus:ring-green-500">
          ଓଡ଼ିଆ
        </button>
      </div>
    </div>

    <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
      <h1 class="text-2xl md:text-3xl font-bold text-center text-green-700 mb-8" data-i18n="title">Farm Machinery Cost Calculator</h1>
      
      <!-- Progress Bar -->
      <div class="mb-8">
        <div class="flex justify-between mb-2">
          <span id="step1-label" class="text-sm font-medium text-green-700" data-i18n="userInfo.title">User Info</span>
          <span id="step2-label" class="text-sm font-medium text-gray-400" data-i18n="fixedCost.title">Fixed Cost</span>
          <span id="step3-label" class="text-sm font-medium text-gray-400" data-i18n="variableCost.title">Variable Cost</span>
          <span id="step4-label" class="text-sm font-medium text-gray-400" data-i18n="results.title">Results</span>
        </div>
        <div class="w-full bg-gray-200 rounded-full h-2.5">
          <div id="progress-bar" class="bg-green-600 h-2.5 rounded-full" style="width: 25%"></div>
        </div>
      </div>

      <!-- Step 1: User Information -->
      <div id="step1" class="step">
        <h2 class="text-xl font-semibold mb-4 text-green-600"><i class="fas fa-user mr-2"></i><span data-i18n="userInfo.title">User Information</span></h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="userInfo.fullName">Full Name</label>
            <input type="text" id="userName" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" data-i18n="[placeholder]userInfo.enterName" placeholder="Enter your name">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="userInfo.mobileNumber">Mobile Number</label>
            <input type="text" id="userMobile" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" data-i18n="[placeholder]userInfo.enterMobile" placeholder="Enter your mobile number">
          </div>
        </div>
        <div class="text-right">
          <button id="next-to-fixed" class="bg-green-600 text-white font-medium py-2 px-4 rounded-md hover:bg-green-700 transition"><span data-i18n="navigation.next">Next</span> <i class="fas fa-arrow-right ml-1"></i></button>
        </div>
      </div>

      <!-- Step 2: Fixed Cost Calculation -->
      <div id="step2" class="step hidden">
        <h2 class="text-xl font-semibold mb-4 text-green-600"><i class="fas fa-calculator mr-2"></i><span data-i18n="fixedCost.title">Fixed Cost Calculation</span></h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="fixedCost.purchasePrice">Purchase Price of the Machine (Rs)</label>
            <input type="number" id="purchasePrice" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" value="500000">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="fixedCost.machineLife">Life of the Machine (Years)</label>
            <input type="number" id="machineLife" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" value="5">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="fixedCost.hoursPerYear">Hours of Operation per Year</label>
            <input type="number" id="hoursPerYear" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" value="1000">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="fixedCost.interestRate">Rate of Interest (%)</label>
            <input type="number" id="interestRate" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" value="11">
          </div>
        </div>
        <div class="flex justify-between">
          <button id="back-to-user" class="bg-gray-400 text-white font-medium py-2 px-4 rounded-md hover:bg-gray-500 transition"><i class="fas fa-arrow-left mr-1"></i> <span data-i18n="navigation.back">Back</span></button>
          <button id="next-to-variable" class="bg-green-600 text-white font-medium py-2 px-4 rounded-md hover:bg-green-700 transition"><span data-i18n="navigation.next">Next</span> <i class="fas fa-arrow-right ml-1"></i></button>
        </div>
      </div>

      <!-- Step 3: Variable Cost Calculation -->
      <div id="step3" class="step hidden">
        <h2 class="text-xl font-semibold mb-4 text-green-600"><i class="fas fa-chart-line mr-2"></i><span data-i18n="variableCost.title">Variable Cost Calculation</span></h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="variableCost.fuelConsumption">Fuel Consumption (L/h)</label>
            <input type="number" id="fuelConsumption" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" value="4">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="variableCost.fuelCost">Cost of Fuel (Rs/L)</label>
            <input type="number" id="fuelCost" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" value="100">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="variableCost.numWorkers">Number of Workers</label>
            <input type="number" id="numWorkers" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" value="2">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="variableCost.wagesWorkers">Wages per Day for Workers (Rs)</label>
            <input type="number" id="wagesWorkers" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" value="450">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="variableCost.numDrivers">Number of Drivers</label>
            <input type="number" id="numDrivers" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" value="1">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="variableCost.wagesDrivers">Wages per Day for Drivers (Rs)</label>
            <input type="number" id="wagesDrivers" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" value="700">
          </div>
        </div>
        <div class="flex justify-between">
          <button id="back-to-fixed" class="bg-gray-400 text-white font-medium py-2 px-4 rounded-md hover:bg-gray-500 transition"><i class="fas fa-arrow-left mr-1"></i> <span data-i18n="navigation.back">Back</span></button>
          <button id="calculate-results" class="bg-green-600 text-white font-medium py-2 px-4 rounded-md hover:bg-green-700 transition"><span data-i18n="navigation.calculate">Calculate Results</span> <i class="fas fa-calculator ml-1"></i></button>
        </div>
      </div>

      <!-- Step 4: Results -->
      <div id="step4" class="step hidden">
        <h2 class="text-xl font-semibold mb-4 text-green-600"><i class="fas fa-file-invoice-dollar mr-2"></i><span data-i18n="results.title">Cost Calculation Results</span></h2>
        
        <div class="mb-6">
          <h3 class="text-lg font-medium mb-3 text-green-700" data-i18n="results.fixedCosts">Fixed Cost Components</h3>
          <div class="overflow-x-auto">
            <table class="min-w-full bg-white border border-gray-200">
              <thead class="bg-gray-100">
                <tr>
                  <th class="py-2 px-4 border-b text-left" data-i18n="results.component">Component</th>
                  <th class="py-2 px-4 border-b text-right" data-i18n="results.value">Value (Rs/h)</th>
                </tr>
              </thead>
              <tbody id="fixedCostTable">
                <!-- Fixed cost items will be inserted here by JavaScript -->
              </tbody>
              <tfoot class="bg-gray-50 font-medium">
                <tr>
                  <td class="py-2 px-4 border-t" data-i18n="results.totalFixedCost">Total Fixed Cost</td>
                  <td id="totalFixedCost" class="py-2 px-4 border-t text-right">-</td>
                </tr>
              </tfoot>
            </table>
          </div>
        </div>

        <div class="mb-6">
          <h3 class="text-lg font-medium mb-3 text-green-700" data-i18n="results.variableCosts">Variable Cost Components</h3>
          <div class="overflow-x-auto">
            <table class="min-w-full bg-white border border-gray-200">
              <thead class="bg-gray-100">
                <tr>
                  <th class="py-2 px-4 border-b text-left" data-i18n="results.component">Component</th>
                  <th class="py-2 px-4 border-b text-right" data-i18n="results.value">Value (Rs/h)</th>
                </tr>
              </thead>
              <tbody id="variableCostTable">
                <!-- Variable cost items will be inserted here by JavaScript -->
              </tbody>
              <tfoot class="bg-gray-50 font-medium">
                <tr>
                  <td class="py-2 px-4 border-t" data-i18n="results.totalVariableCost">Total Variable Cost</td>
                  <td id="totalVariableCost" class="py-2 px-4 border-t text-right">-</td>
                </tr>
              </tfoot>
            </table>
          </div>
        </div>

        <div class="bg-green-50 rounded-lg p-4 mb-6">
          <h3 class="text-lg font-medium mb-3 text-green-700" data-i18n="results.finalResults">Final Results</h3>
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <div class="bg-white p-3 rounded-lg border border-green-200 shadow-sm">
              <p class="text-sm text-gray-600" data-i18n="results.totalOperationCost">Total Cost of Operation</p>
              <p id="totalOperationCost" class="text-xl font-bold text-green-700">- Rs/h</p>
            </div>
            <div class="bg-white p-3 rounded-lg border border-green-200 shadow-sm">
              <p class="text-sm text-gray-600" data-i18n="results.customHiringCost">Custom Hiring Cost (with 10% profit)</p>
              <p id="customHiringCost" class="text-xl font-bold text-green-700">- Rs/h</p>
            </div>
          </div>
        </div>

        <div class="flex justify-between">
          <button id="back-to-variable" class="bg-gray-400 text-white font-medium py-2 px-4 rounded-md hover:bg-gray-500 transition"><i class="fas fa-arrow-left mr-1"></i> <span data-i18n="navigation.back">Back</span></button>
          <button id="download-pdf" class="bg-green-600 text-white font-medium py-2 px-4 rounded-md hover:bg-green-700 transition"><i class="fas fa-file-pdf mr-1"></i> <span data-i18n="navigation.exportPdf">Export to PDF</span></button>
        </div>
      </div>
    </div>
    <div class="text-center text-gray-500 text-sm mb-4">
      <p><span data-i18n="footer.copyright">Farm Machinery Cost Calculator</span> &copy; 2025</p>
      <p class="mt-1"><span data-i18n="footer.developed">Developed by Dr. Dwarika Mohan Das and Designed by Anshuman Nayak</span></p>
    </div>
  </div>

  <script>
    // Configuration object for the calculator
    const calculatorConfig = {
      salvageValuePercent: 10,       // 10% of initial cost
      taxesInsurancePercent: 3,      // 3% of average cost per year
      repairMaintenancePercent: 10,  // 10% of initial cost
      lubricatingOilPercent: 30,     // 30% of fuel cost
      hoursPerDay: 8,                // 8 hours per day for labor calculation
      profitPercent: 10              // 10% extra profit for custom hiring
    };

    // i18n configuration
    const resources = {
      en: {
        translation: {
          title: "Farm Machinery Cost Calculator",
          userInfo: {
            title: "User Information",
            fullName: "Full Name",
            enterName: "Enter your name",
            mobileNumber: "Mobile Number",
            enterMobile: "Enter your mobile number"
          },
          navigation: {
            next: "Next",
            back: "Back",
            calculate: "Calculate Results",
            exportPdf: "Export to PDF"
          },
          fixedCost: {
            title: "Fixed Cost Calculation",
            purchasePrice: "Purchase Price of the Machine (Rs)",
            machineLife: "Life of the Machine (Years)",
            hoursPerYear: "Hours of Operation per Year",
            interestRate: "Rate of Interest (%)"
          },
          variableCost: {
            title: "Variable Cost Calculation",
            fuelConsumption: "Fuel Consumption (L/h)",
            fuelCost: "Cost of Fuel (Rs/L)",
            numWorkers: "Number of Workers",
            wagesWorkers: "Wages per Day for Workers (Rs)",
            numDrivers: "Number of Drivers",
            wagesDrivers: "Wages per Day for Drivers (Rs)"
          },
          results: {
            title: "Cost Calculation Results",
            fixedCosts: "Fixed Cost Components",
            variableCosts: "Variable Cost Components",
            finalResults: "Final Results",
            component: "Component",
            value: "Value (Rs/h)",
            totalFixedCost: "Total Fixed Cost",
            totalVariableCost: "Total Variable Cost",
            totalOperationCost: "Total Cost of Operation",
            customHiringCost: "Custom Hiring Cost (with 10% profit)"
          },
          fixedComponents: {
            salvageValue: "Salvage Value",
            depreciationCost: "Depreciation Cost",
            averagePurchasePrice: "Average Purchase Price",
            interestOnInvestment: "Interest on Investment",
            taxesInsurance: "Taxes, Insurance and Housing"
          },
          variableComponents: {
            repairMaintenance: "Repair and Maintenance Cost",
            fuelCost: "Fuel Cost",
            lubricatingOil: "Lubricating Oil Cost",
            operatorCost: "Operator Cost"
          },
          pdf: {
            title: "Farm Machinery Cost Calculation Report",
            generated: "Generated on",
            name: "Name",
            mobile: "Mobile",
            inputParameters: "Input Parameters",
            purchasePrice: "Purchase Price",
            machineLife: "Machine Life",
            hoursPerYear: "Hours per Year",
            interestRate: "Interest Rate",
            fuelConsumption: "Fuel Consumption",
            fuelCost: "Fuel Cost",
            workers: "Workers",
            drivers: "Drivers",
            fixedCosts: "Fixed Costs (Rs/h)",
            variableCosts: "Variable Costs (Rs/h)",
            finalResults: "Final Results",
            description: "Description",
            years: "years",
            perDay: "per day"
          },
          footer: {
            copyright: "Farm Machinery Cost Calculator",
            developed: "Developed by Dr. Dwarika Mohan Das and Designed by Anshuman Nayak"
          }
        }
      },
      hi: {
        translation: {
          title: "कृषि मशीनरी लागत कैलकुलेटर",
          userInfo: {
            title: "उपयोगकर्ता जानकारी",
            fullName: "पूरा नाम",
            enterName: "अपना नाम दर्ज करें",
            mobileNumber: "मोबाइल नंबर",
            enterMobile: "अपना मोबाइल नंबर दर्ज करें"
          },
          navigation: {
            next: "अगला",
            back: "पीछे",
            calculate: "परिणाम की गणना करें",
            exportPdf: "पीडीएफ में निर्यात करें"
          },
          fixedCost: {
            title: "स्थिर लागत गणना",
            purchasePrice: "मशीन का खरीद मूल्य (रु)",
            machineLife: "मशीन का जीवन (वर्ष)",
            hoursPerYear: "प्रति वर्ष संचालन के घंटे",
            interestRate: "ब्याज दर (%)"
          },
          variableCost: {
            title: "परिवर्तनीय लागत गणना",
            fuelConsumption: "ईंधन खपत (L/h)",
            fuelCost: "ईंधन की लागत (रु/L)",
            numWorkers: "कार्यकर्ताओं की संख्या",
            wagesWorkers: "कार्यकर्ताओं के लिए प्रति दिन मजदूरी (रु)",
            numDrivers: "ड्राइवरों की संख्या",
            wagesDrivers: "ड्राइवरों के लिए प्रति दिन मजदूरी (रु)"
          },
          results: {
            title: "लागत गणना परिणाम",
            fixedCosts: "स्थिर लागत घटक",
            variableCosts: "परिवर्तनीय लागत घटक",
            finalResults: "अंतिम परिणाम",
            component: "घटक",
            value: "मूल्य (रु/h)",
            totalFixedCost: "कुल स्थिर लागत",
            totalVariableCost: "कुल परिवर्तनीय लागत",
            totalOperationCost: "संचालन की कुल लागत",
            customHiringCost: "कस्टम हायरिंग लागत (10% लाभ के साथ)"
          },
          fixedComponents: {
            salvageValue: "अवशेष मूल्य",
            depreciationCost: "मूल्यह्रास लागत",
            averagePurchasePrice: "औसत खरीद मूल्य",
            interestOnInvestment: "निवेश पर ब्याज",
            taxesInsurance: "कर, बीमा और आवास"
          },
          variableComponents: {
            repairMaintenance: "मरम्मत और रखरखाव लागत",
            fuelCost: "ईंधन लागत",
            lubricatingOil: "स्नेहन तेल की लागत",
            operatorCost: "ऑपरेटर लागत"
          },
          pdf: {
            title: "कृषि मशीनरी लागत गणना रिपोर्ट",
            generated: "पर उत्पन्न",
            name: "नाम",
            mobile: "मोबाइल",
            inputParameters: "इनपुट पैरामीटर",
            purchasePrice: "खरीद मूल्य",
            machineLife: "मशीन जीवन",
            hoursPerYear: "प्रति वर्ष घंटे",
            interestRate: "ब्याज दर",
            fuelConsumption: "ईंधन खपत",
            fuelCost: "ईंधन लागत",
            workers: "कार्यकर्ता",
            drivers: "ड्राइवर",
            fixedCosts: "स्थिर लागत (रु/h)",
            variableCosts: "परिवर्तनीय लागत (रु/h)",
            finalResults: "अंतिम परिणाम",
            description: "विवरण",
            years: "वर्ष",
            perDay: "प्रति दिन"
          },
          footer: {
            copyright: "कृषि मशीनरी लागत कैलकुलेटर",
            developed: "डॉ. द्वारिका मोहन दास द्वारा विकसित और अंशुमन नायक द्वारा डिज़ाइन किया गया"
          }
        }
      },
      or: {
        translation: {
          title: "କୃଷି ଯନ୍ତ୍ରପାତି ମୂଲ୍ୟ କ୍ୟାଲକୁଲେଟର",
          userInfo: {
            title: "ବ୍ୟବହାରକାରୀ ସୂଚନା",
            fullName: "ପୁରା ନାମ",
            enterName: "ଆପଣଙ୍କ ନାମ ଲେଖନ୍ତୁ",
            mobileNumber: "ମୋବାଇଲ ନମ୍ବର",
            enterMobile: "ଆପଣଙ୍କ ମୋବାଇଲ ନମ୍ବର ଲେଖନ୍ତୁ"
          },
          navigation: {
            next: "ପରବର୍ତ୍ତୀ",
            back: "ପଛକୁ",
            calculate: "ଫଳାଫଳ ଗଣନା କରନ୍ତୁ",
            exportPdf: "PDF କୁ ରପ୍ତାନି କରନ୍ତୁ"
          },
          fixedCost: {
            title: "ସ୍ଥିର ମୂଲ୍ୟ ଗଣନା",
            purchasePrice: "ଯନ୍ତ୍ରର କ୍ରୟ ମୂଲ୍ୟ (ଟଙ୍କା)",
            machineLife: "ଯନ୍ତ୍ରର ଜୀବନକାଳ (ବର୍ଷ)",
            hoursPerYear: "ବର୍ଷକୁ ପରିଚାଳନା ଘଣ୍ଟା",
            interestRate: "ସୁଧ ହାର (%)"
          },
          variableCost: {
            title: "ପରିବର୍ତ୍ତନଶୀଳ ମୂଲ୍ୟ ଗଣନା",
            fuelConsumption: "ଜ୍ୱାଳାନୀ ଖପତ (L/h)",
            fuelCost: "ଜ୍ୱାଳାନୀ ମୂଲ୍ୟ (ଟଙ୍କା/L)",
            numWorkers: "କର୍ମଚାରୀଙ୍କ ସଂଖ୍ୟା",
            wagesWorkers: "କର୍ମଚାରୀଙ୍କ ପାଇଁ ଦୈନିକ ମଜୁରି (ଟଙ୍କା)",
            numDrivers: "ଡ୍ରାଇଭରଙ୍କ ସଂଖ୍ୟା",
            wagesDrivers: "ଡ୍ରାଇଭରଙ୍କ ପାଇଁ ଦୈନିକ ମଜୁରି (ଟଙ୍କା)"
          },
          results: {
            title: "ମୂଲ୍ୟ ଗଣନା ଫଳାଫଳ",
            fixedCosts: "ସ୍ଥିର ମୂଲ୍ୟ ଉପାଦାନ",
            variableCosts: "ପରିବର୍ତ୍ତନଶୀଳ ମୂଲ୍ୟ ଉପାଦାନ",
            finalResults: "ଚୂଡ଼ାନ୍ତ ଫଳାଫଳ",
            component: "ଉପାଦାନ",
            value: "ମୂଲ୍ୟ (ଟଙ୍କା/h)",
            totalFixedCost: "ମୋଟ ସ୍ଥିର ମୂଲ୍ୟ",
            totalVariableCost: "ମୋଟ ପରିବର୍ତ୍ତନଶୀଳ ମୂଲ୍ୟ",
            totalOperationCost: "ପରିଚାଳନାର ମୋଟ ମୂଲ୍ୟ",
            customHiringCost: "କଷ୍ଟମ ଭଡ଼ା ମୂଲ୍ୟ (10% ଲାଭ ସହିତ)"
          },
          fixedComponents: {
            salvageValue: "ଅବଶିଷ୍ଟ ମୂଲ୍ୟ",
            depreciationCost: "ମୂଲ୍ୟହ୍ରାସ ମୂଲ୍ୟ",
            averagePurchasePrice: "ହାରାହାରି କ୍ରୟ ମୂଲ୍ୟ",
            interestOnInvestment: "ନିବେଶ ଉପରେ ସୁଧ",
            taxesInsurance: "କର, ବୀମା ଏବଂ ଆବାସ"
          },
          variableComponents: {
            repairMaintenance: "ମରାମତି ଏବଂ ରକ୍ଷଣାବେକ୍ଷଣ ମୂଲ୍ୟ",
            fuelCost: "ଜ୍ୱାଳାନୀ ମୂଲ୍ୟ",
            lubricatingOil: "ଲୁବ୍ରିକେଟିଂ ତେଲ ମୂଲ୍ୟ",
            operatorCost: "ଅପରେଟର ମୂଲ୍ୟ"
          },
          pdf: {
            title: "କୃଷି ଯନ୍ତ୍ରପାତି ମୂଲ୍ୟ ଗଣନା ରିପୋର୍ଟ",
            generated: "ରେ ସୃଷ୍ଟି ହୋଇଛି",
            name: "ନାମ",
            mobile: "ମୋବାଇଲ",
            inputParameters: "ଇନପୁଟ ପାରାମିଟର",
            purchasePrice: "କ୍ରୟ ମୂଲ୍ୟ",
            machineLife: "ଯନ୍ତ୍ର ଜୀବନ",
            hoursPerYear: "ବର୍ଷକୁ ଘଣ୍ଟା",
            interestRate: "ସୁଧ ହାର",
            fuelConsumption: "ଜ୍ୱାଳାନୀ ଖପତ",
            fuelCost: "ଜ୍ୱାଳାନୀ ମୂଲ୍ୟ",
            workers: "କର୍ମଚାରୀ",
            drivers: "ଡ୍ରାଇଭର",
            fixedCosts: "ସ୍ଥିର ମୂଲ୍ୟ (ଟଙ୍କା/h)",
            variableCosts: "ପରିବର୍ତ୍ତନଶୀଳ ମୂଲ୍ୟ (ଟଙ୍କା/h)",
            finalResults: "ଚୂଡ଼ାନ୍ତ ଫଳାଫଳ",
            description: "ବିବରଣୀ",
            years: "ବର୍ଷ",
            perDay: "ପ୍ରତିଦିନ"
          },
          footer: {
            copyright: "କୃଷି ଯନ୍ତ୍ରପାତି ମୂଲ୍ୟ କ୍ୟାଲକୁଲେଟର",
            developed: "ଡା. ଦ୍ୱାରିକା ମୋହନ ଦାସଙ୍କ ଦ୍ୱାରା ବିକଶିତ ଏବଂ ଅଂଶୁମାନ ନାୟକଙ୍କ ଦ୍ୱାରା ଡିଜାଇନ୍"
          }
        }
      }
    };

    // Initialize i18next
    i18next
      .init({
        lng: 'en',
        debug: false,
        resources: resources
      })
      .then(function(t) {
        updateContent();
      });

    // Function to update content based on selected language
    function updateContent() {
      const elements = document.querySelectorAll('[data-i18n]');
      elements.forEach(element => {
        const key = element.getAttribute('data-i18n');
        element.textContent = i18next.t(key);
      });

      // Handle placeholder attributes
      const placeholderElements = document.querySelectorAll('[data-i18n^="[placeholder]"]');
      placeholderElements.forEach(element => {
        const key = element.getAttribute('data-i18n').substring(12); // remove [placeholder]
        element.setAttribute('placeholder', i18next.t(key));
      });

      // Update language selection buttons
      document.querySelectorAll('.language-btn').forEach(btn => {
        if (btn.id === 'lang-' + i18next.language) {
          btn.classList.add('bg-green-700', 'text-white');
          btn.classList.remove('bg-white', 'text-gray-900');
        } else {
          btn.classList.remove('bg-green-700', 'text-white');
          btn.classList.add('bg-white', 'text-gray-900');
        }
      });
    }

    // Language selection handlers
    document.getElementById('lang-en').addEventListener('click', function() {
      i18next.changeLanguage('en').then(updateContent);
    });

    document.getElementById('lang-hi').addEventListener('click', function() {
      i18next.changeLanguage('hi').then(updateContent);
    });

    document.getElementById('lang-or').addEventListener('click', function() {
      i18next.changeLanguage('or').then(updateContent);
    });

    // Navigation controls
    document.getElementById('next-to-fixed').addEventListener('click', () => {
      document.getElementById('step1').classList.add('hidden');
      document.getElementById('step2').classList.remove('hidden');
      document.getElementById('step1-label').classList.remove('text-green-700');
      document.getElementById('step1-label').classList.add('text-gray-400');
      document.getElementById('step2-label').classList.remove('text-gray-400');
      document.getElementById('step2-label').classList.add('text-green-700');
      document.getElementById('progress-bar').style.width = '50%';
    });
    
    document.getElementById('back-to-user').addEventListener('click', () => {
      document.getElementById('step2').classList.add('hidden');
      document.getElementById('step1').classList.remove('hidden');
      document.getElementById('step2-label').classList.remove('text-green-700');
      document.getElementById('step2-label').classList.add('text-gray-400');
      document.getElementById('step1-label').classList.remove('text-gray-400');
      document.getElementById('step1-label').classList.add('text-green-700');
      document.getElementById('progress-bar').style.width = '25%';
    });
    
    document.getElementById('next-to-variable').addEventListener('click', () => {
      document.getElementById('step2').classList.add('hidden');
      document.getElementById('step3').classList.remove('hidden');
      document.getElementById('step2-label').classList.remove('text-green-700');
      document.getElementById('step2-label').classList.add('text-gray-400');
      document.getElementById('step3-label').classList.remove('text-gray-400');
      document.getElementById('step3-label').classList.add('text-green-700');
      document.getElementById('progress-bar').style.width = '75%';
    });
    
    document.getElementById('back-to-fixed').addEventListener('click', () => {
      document.getElementById('step3').classList.add('hidden');
      document.getElementById('step2').classList.remove('hidden');
      document.getElementById('step3-label').classList.remove('text-green-700');
      document.getElementById('step3-label').classList.add('text-gray-400');
      document.getElementById('step2-label').classList.remove('text-gray-400');
      document.getElementById('step2-label').classList.add('text-green-700');
      document.getElementById('progress-bar').style.width = '50%';
    });

    document.getElementById('back-to-variable').addEventListener('click', () => {
      document.getElementById('step4').classList.add('hidden');
      document.getElementById('step3').classList.remove('hidden');
      document.getElementById('step4-label').classList.remove('text-green-700');
      document.getElementById('step4-label').classList.add('text-gray-400');
      document.getElementById('step3-label').classList.remove('text-gray-400');
      document.getElementById('step3-label').classList.add('text-green-700');
      document.getElementById('progress-bar').style.width = '75%';
    });

    // Calculate results
    document.getElementById('calculate-results').addEventListener('click', () => {
      // Get fixed cost inputs
      const purchasePrice = parseFloat(document.getElementById('purchasePrice').value);
      const machineLife = parseFloat(document.getElementById('machineLife').value);
      const hoursPerYear = parseFloat(document.getElementById('hoursPerYear').value);
      const interestRate = parseFloat(document.getElementById('interestRate').value);
      
      // Get variable cost inputs
      const fuelConsumption = parseFloat(document.getElementById('fuelConsumption').value);
      const fuelCost = parseFloat(document.getElementById('fuelCost').value);
      const numWorkers = parseFloat(document.getElementById('numWorkers').value);
      const wagesWorkers = parseFloat(document.getElementById('wagesWorkers').value);
      const numDrivers = parseFloat(document.getElementById('numDrivers').value);
      const wagesDrivers = parseFloat(document.getElementById('wagesDrivers').value);

      // Calculate fixed costs
      const salvageValue = purchasePrice * (calculatorConfig.salvageValuePercent / 100);
      const depreciationCost = (purchasePrice - salvageValue) / (machineLife * hoursPerYear);
      const averagePurchasePrice = (purchasePrice + salvageValue) / 2;
      const interestOnInvestment = (averagePurchasePrice * interestRate) / (100 * hoursPerYear);
      const taxesInsurance = (averagePurchasePrice * calculatorConfig.taxesInsurancePercent) / (100 * hoursPerYear);
      const totalFixedCost = depreciationCost + interestOnInvestment + taxesInsurance;
      
      // Calculate variable costs
      const repairMaintenanceCost = (purchasePrice * calculatorConfig.repairMaintenancePercent) / (100 * machineLife * hoursPerYear);
      const fuelCostPerHour = fuelConsumption * fuelCost;
      const lubricatingOilCost = fuelCostPerHour * (calculatorConfig.lubricatingOilPercent / 100);
      const operatorCost = ((numWorkers * wagesWorkers) + (numDrivers * wagesDrivers)) / calculatorConfig.hoursPerDay;
      const totalVariableCost = repairMaintenanceCost + fuelCostPerHour + lubricatingOilCost + operatorCost;
      
      // Calculate final costs
      const totalOperationCost = totalFixedCost + totalVariableCost;
      const customHiringCost = totalOperationCost * (1 + calculatorConfig.profitPercent / 100);
      
      // Update fixed cost table
      const fixedCostTable = document.getElementById('fixedCostTable');
      fixedCostTable.innerHTML = `
        <tr>
          <td class="py-2 px-4 border-b">${i18next.t('fixedComponents.salvageValue')}</td>
          <td class="py-2 px-4 border-b text-right">${salvageValue.toFixed(2)}</td>
        </tr>
        <tr>
          <td class="py-2 px-4 border-b">${i18next.t('fixedComponents.depreciationCost')}</td>
          <td class="py-2 px-4 border-b text-right">${depreciationCost.toFixed(2)}</td>
        </tr>
        <tr>
          <td class="py-2 px-4 border-b">${i18next.t('fixedComponents.averagePurchasePrice')}</td>
          <td class="py-2 px-4 border-b text-right">${averagePurchasePrice.toFixed(2)}</td>
        </tr>
        <tr>
          <td class="py-2 px-4 border-b">${i18next.t('fixedComponents.interestOnInvestment')}</td>
          <td class="py-2 px-4 border-b text-right">${interestOnInvestment.toFixed(2)}</td>
        </tr>
        <tr>
          <td class="py-2 px-4 border-b">${i18next.t('fixedComponents.taxesInsurance')}</td>
          <td class="py-2 px-4 border-b text-right">${taxesInsurance.toFixed(2)}</td>
        </tr>
      `;
      document.getElementById('totalFixedCost').textContent = totalFixedCost.toFixed(2);
      
      // Update variable cost table
      const variableCostTable = document.getElementById('variableCostTable');
      variableCostTable.innerHTML = `
        <tr>
          <td class="py-2 px-4 border-b">${i18next.t('variableComponents.repairMaintenance')}</td>
          <td class="py-2 px-4 border-b text-right">${repairMaintenanceCost.toFixed(2)}</td>
        </tr>
        <tr>
          <td class="py-2 px-4 border-b">${i18next.t('variableComponents.fuelCost')}</td>
          <td class="py-2 px-4 border-b text-right">${fuelCostPerHour.toFixed(2)}</td>
        </tr>
        <tr>
          <td class="py-2 px-4 border-b">${i18next.t('variableComponents.lubricatingOil')}</td>
          <td class="py-2 px-4 border-b text-right">${lubricatingOilCost.toFixed(2)}</td>
        </tr>
        <tr>
          <td class="py-2 px-4 border-b">${i18next.t('variableComponents.operatorCost')}</td>
          <td class="py-2 px-4 border-b text-right">${operatorCost.toFixed(2)}</td>
        </tr>
      `;
      document.getElementById('totalVariableCost').textContent = totalVariableCost.toFixed(2);
      
      // Update final results
      document.getElementById('totalOperationCost').textContent = `${totalOperationCost.toFixed(2)} Rs/h`;
      document.getElementById('customHiringCost').textContent = `${customHiringCost.toFixed(2)} Rs/h`;
      
      // Show results step
      document.getElementById('step3').classList.add('hidden');
      document.getElementById('step4').classList.remove('hidden');
      document.getElementById('step3-label').classList.remove('text-green-700');
      document.getElementById('step3-label').classList.add('text-gray-400');
      document.getElementById('step4-label').classList.remove('text-gray-400');
      document.getElementById('step4-label').classList.add('text-green-700');
      document.getElementById('progress-bar').style.width = '100%';
    });
    
    // Export to PDF
    document.getElementById('download-pdf').addEventListener('click', () => {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      
      // User information
      const userName = document.getElementById('userName').value || 'Not provided';
      const userMobile = document.getElementById('userMobile').value || 'Not provided';
      
      // Add title
      doc.setFontSize(20);
      doc.setTextColor(39, 103, 73);
      doc.text(i18next.t('pdf.title'), 105, 20, { align: 'center' });
      
      // Add timestamp
      const now = new Date();
      doc.setFontSize(10);
      doc.setTextColor(100);
      doc.text(`${i18next.t('pdf.generated')}: ${now.toLocaleDateString()} ${now.toLocaleTimeString()}`, 105, 30, { align: 'center' });
      
      // Add user info
      doc.setFontSize(12);
      doc.setTextColor(0);
      doc.text(`${i18next.t('pdf.name')}: ${userName}`, 20, 40);
      doc.text(`${i18next.t('pdf.mobile')}: ${userMobile}`, 20, 48);

      // Input parameters
      doc.setFontSize(14);
      doc.setTextColor(39, 103, 73);
      doc.text(i18next.t('pdf.inputParameters'), 20, 60);
      
      doc.setFontSize(10);
      doc.setTextColor(0);
      doc.text(`${i18next.t('pdf.purchasePrice')}: Rs ${document.getElementById('purchasePrice').value}`, 20, 70);
      doc.text(`${i18next.t('pdf.machineLife')}: ${document.getElementById('machineLife').value} ${i18next.t('pdf.years')}`, 20, 78);
      doc.text(`${i18next.t('pdf.hoursPerYear')}: ${document.getElementById('hoursPerYear').value}`, 20, 86);
      doc.text(`${i18next.t('pdf.interestRate')}: ${document.getElementById('interestRate').value}%`, 20, 94);
      
      doc.text(`${i18next.t('pdf.fuelConsumption')}: ${document.getElementById('fuelConsumption').value} L/h`, 120, 70);
      doc.text(`${i18next.t('pdf.fuelCost')}: Rs ${document.getElementById('fuelCost').value}/L`, 120, 78);
      doc.text(`${i18next.t('pdf.workers')}: ${document.getElementById('numWorkers').value} (Rs ${document.getElementById('wagesWorkers').value} ${i18next.t('pdf.perDay')})`, 120, 86);
      doc.text(`${i18next.t('pdf.drivers')}: ${document.getElementById('numDrivers').value} (Rs ${document.getElementById('wagesDrivers').value} ${i18next.t('pdf.perDay')})`, 120, 94);
      
      // Fixed costs
      doc.setFontSize(14);
      doc.setTextColor(39, 103, 73);
      doc.text(i18next.t('pdf.fixedCosts'), 20, 110);
      
      const fixedCostData = [];
      document.querySelectorAll('#fixedCostTable tr').forEach(row => {
        const component = row.cells[0].textContent;
        const value = row.cells[1].textContent;
        fixedCostData.push([component, value]);
      });
      
      doc.autoTable({
        startY: 115,
        head: [[i18next.t('results.component'), i18next.t('results.value')]],
        body: fixedCostData,
        foot: [[i18next.t('results.totalFixedCost'), document.getElementById('totalFixedCost').textContent]],
        theme: 'grid',
        headStyles: { fillColor: [39, 103, 73] },
        footStyles: { fillColor: [240, 240, 240], textColor: [0, 0, 0], fontStyle: 'bold' }
      });
      
      // Variable costs
      let finalY = doc.lastAutoTable.finalY + 15;
      doc.setFontSize(14);
      doc.setTextColor(39, 103, 73);
      doc.text(i18next.t('pdf.variableCosts'), 20, finalY);
      
      const variableCostData = [];
      document.querySelectorAll('#variableCostTable tr').forEach(row => {
        const component = row.cells[0].textContent;
        const value = row.cells[1].textContent;
        variableCostData.push([component, value]);
      });
      
      doc.autoTable({
        startY: finalY + 5,
        head: [[i18next.t('results.component'), i18next.t('results.value')]],
        body: variableCostData,
        foot: [[i18next.t('results.totalVariableCost'), document.getElementById('totalVariableCost').textContent]],
        theme: 'grid',
        headStyles: { fillColor: [39, 103, 73] },
        footStyles: { fillColor: [240, 240, 240], textColor: [0, 0, 0], fontStyle: 'bold' }
      });
      
      // Final results
      finalY = doc.lastAutoTable.finalY + 15;
      doc.setFontSize(14);
      doc.setTextColor(39, 103, 73);
      doc.text(i18next.t('pdf.finalResults'), 20, finalY);
      
      doc.autoTable({
        startY: finalY + 5,
        head: [[i18next.t('pdf.description'), i18next.t('results.value')]],
        body: [
          [i18next.t('results.totalOperationCost'), document.getElementById('totalOperationCost').textContent],
          [i18next.t('results.customHiringCost'), document.getElementById('customHiringCost').textContent]
        ],
        theme: 'grid',
        headStyles: { fillColor: [39, 103, 73] },
        bodyStyles: { fontStyle: 'bold' }
      });
      
      // Add watermark
      doc.setTextColor(200);
      doc.setFontSize(30);
      doc.text(i18next.t('title'), 105, 150, {
        align: 'center',
        angle: 45
      });
      
      // Save the PDF
      doc.save('farm-machinery-cost-report.pdf');
    });
  </script>
</body>
</html>